<!DOCTYPE html>
<title>AozoraRubyParser</title>
<meta charset="utf-8">
<style type="text/css">
  textarea { width: 50%; height: 10em; }
</style>
<script type="application/javascript" src="../src/aozora-ruby-parser.js"></script>
<script type="application/javascript" src="../src/aozora-ruby-html.js"></script>
<script type="application/javascript" src="../src/aozora-ruby-pixiv.js"></script>
<script type="application/javascript">
(function(){
function setTextArea(id, content)
{
    "use strict";
    var base = document.getElementById(id);
    for (var n = 0; base.children.length; n++) {
        if (base.children[n].tagName === 'TEXTAREA') {
            base.children[n].value = content;
            return true;
        }
    }

    return false;
}

function getTextArea(id)
{
    "use strict";
    var base = document.getElementById(id);
    for (var n = 0; base.children.length; n++) {
        if (base.children[n].tagName === 'TEXTAREA') {
            return base.children[n];
        }
    }

    return false;
}

function updateAozora() {
    "use strict";
    var parser = new AozoraRubyParser(getTextArea("aozora").value);
    parser.parse();
    setTextArea("html",  (new AozoraRubyHTMLConverter).exports(parser.nodes));
    setTextArea("pixiv", (new AozoraRuby_pixivConverter).exports(parser.nodes));
}

setTimeout(function() {
    updateAozora();
    getTextArea("aozora").addEventListener("keyup", updateAozora, false);
    getTextArea("pixiv").addEventListener("keyup", updateAozora, false);
}, 100);
}())</script>

<h1>AozoraRubyParser</h1>
<fieldset id="aozora">
    <legend>Aozora</legend>
    <textarea>pixiv《ピクシブ》株式会社《かぶしきがいしゃ》</textarea>
</fieldset>
<fieldset id="html">
    <legend>HTML</legend>
    <textarea readonly></textarea>
</fieldset>
<fieldset id="pixiv">
    <legend>pixiv</legend>
    <textarea readonly></textarea>
</fieldset>
